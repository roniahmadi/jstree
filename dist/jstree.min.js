/**
 * jstree - javascript tree manipulation and visualization
 * @version v4.0.0
 * @link https://www.jstree.com
 * @license MIT
 */
/**
 * jstree - javascript tree manipulation and visualization
 * @version v4.0.0
 * @link https://www.jstree.com
 * @license MIT
 */
class Flat{_empty(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}constructor(t,e){this.dataSource=e,this.dataSource.count||(this.dataSource.count=()=>0),this.dataSource.create||(this.dataSource.create=()=>document.createElement("div")),this.dataSource.wrapper||(this.dataSource.wrapper=()=>document.createElement("div")),this.container=this._empty(t),this.wrapper=this.dataSource.wrapper(),this.wrapper.className+=" vakata-scroller-wrapper",this.container.appendChild(this.wrapper),this.count=0,this.render()}render(){this.updateAll(!0)}updateItem(t,e,s=!0){this.dataSource.update(t,e,s)}updateAll(t=!0){if(t){this.count=this.dataSource.count();let t=document.createDocumentFragment();for(let e=0;e<this.count;e++){let e=this.dataSource.create();e.className+=" vakata-scroller-item",t.appendChild(e)}this._empty(this.wrapper).appendChild(t)}let e=this.wrapper.firstChild;for(let s=0;s<this.count;s++)this.updateItem(s,e,!t),e=e.nextSibling||this.wrapper.firstChild}}class InfiniteScroller{_empty(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}_offset(t){return t.getBoundingClientRect().top+t.ownerDocument.defaultView.pageYOffset}_scrollParent(t){for(;t&&"body"!==(t.tagName||"body").toLowerCase();){if(-1!==t.className.indexOf("vakata-scroller-parent"))return t;let e=getComputedStyle(t,null);if("auto"===e.getPropertyValue("overflow")||"scroll"===e.getPropertyValue("overflow")||"auto"===e.getPropertyValue("overflow-y")||"scroll"===e.getPropertyValue("overflow-y"))return t;t=t.parentNode}return document.documentElement}_debounce(t,e){let s;return()=>{let i=arguments;clearTimeout(s),s=setTimeout((()=>t.apply(this,i)),e)}}_processScroll(){let t=this.scrollParent.scrollTop-this._state.scroll-this._state.topPosition,e=this._state.render*this._state.height/4,s=Math.floor(Math.abs(t-e)/this._state.height),i=()=>{let t=this._state.topPosition;t+=this._state.render*this._state.height,t<this._state.count*this._state.height&&(this._state.index++,this._state.top.pos=t,this._state.bottom=this._state.top,this._state.top=this._state.top.nextSibling||this.wrapper.firstChild,this._state.topPosition=this._state.index*this._state.height,this._state.bottomPosition=this._state.topPosition+(this._state.render-1)*this._state.height)},r=()=>{let t=this._state.bottomPosition;t-=this._state.render*this._state.height,t>=0&&(this._state.index--,this._state.bottom.pos=t,this._state.top=this._state.bottom,this._state.bottom=this._state.bottom.previousSibling||this.wrapper.lastChild,this._state.topPosition=this._state.index*this._state.height,this._state.bottomPosition=this._state.topPosition+(this._state.render-1)*this._state.height)};if(t>e)for(let t=0;t<s;t++)i();if(t<e)for(let t=0;t<s;t++)r();let n=this._state.top;for(let t=0;t<this._state.render;t++)n.style.transform="translateY("+n.pos+"px)",n=n.nextSibling||this.wrapper.firstChild;this.updateAll()}_wrapperWidth(t=!1){let e=0,s=this.wrapper.firstChild,i=this.wrapper.width||this.wrapper.offsetWidth;t&&(this.wrapper.style.minWidth="none");do{s.width&&s.width>e&&(e=s.width)}while(s=s.nextSibling);(t||i!==e)&&(this.wrapper.width=e,this.wrapper.style.minWidth=e+"px")}constructor(t,e){this.dataSource=e,this.dataSource.count||(this.dataSource.count=()=>0),this.dataSource.create||(this.dataSource.create=()=>document.createElement("div")),this.dataSource.wrapper||(this.dataSource.wrapper=()=>document.createElement("div")),this._state={height:0,count:this.dataSource.count(),scroll:0,render:0,visible:0,index:0,top:null,bottom:null},this.container=this._empty(t),this.wrapper=this.dataSource.wrapper(),this.wrapper.className+=" vakata-scroller-wrapper",this.wrapper.style.position="relative",this.container.appendChild(this.wrapper),this.scrollParent=this._scrollParent(this.wrapper);let s=this.scrollParent===document.documentElement?window:this.scrollParent;this.render(),window.addEventListener("resize",this._debounce(this.render,50)),s.addEventListener("scroll",(()=>{this.scrollID&&window.cancelAnimationFrame(this.scrollID),this.scrollID=window.requestAnimationFrame((()=>this._processScroll()))}))}render(){let t=this.dataSource.create();t.className+=" vakata-scroller-item",t.innerHTML="&nbsp;",this.wrapper.appendChild(t),this._state.height=t.offsetHeight,this._state.count=this.dataSource.count(),this.wrapper.removeChild(t),this.wrapper.style.height=this._state.count*this._state.height+"px",this._state.scroll=0,this.scrollParent!==this.container&&(this._state.scroll=this.scrollParent===document.documentElement?this._offset(this.container):this._offset(this.container)-this._offset(this.scrollParent)),this._state.visible=Math.min(window.innerHeight,this.scrollParent.offsetHeight),this._state.render=2*Math.max(1,Math.ceil(this._state.visible/this._state.height));let e=document.createDocumentFragment();for(let t=0;t<this._state.render;t++){let s=this.dataSource.create();s.className+=" vakata-scroller-item",s.style.willChange="transform",s.style.position="absolute",s.style.minWidth="100%",s.style.height=this._state.height+"px",s.style.transform="translateY("+this._state.height*t+"px)",e.appendChild(s)}this._empty(this.wrapper).appendChild(e),this._state.top=this.wrapper.firstChild,this._state.topPosition=0,this._state.index=0,this._state.bottom=this.wrapper.lastChild,this._state.bottomPosition=this._state.height*(this._state.render-1),this._processScroll(),this.updateAll(!0)}updateItem(t,e,s=!0){this.dataSource.update(t,e,s)}updateAll(t=!0){let e=this.dataSource.count();e!==this._state.count&&(this._state.count=e,this.wrapper.style.height=this._state.count*this._state.height+"px");let s=this._state.top;for(let e=this._state.index;e<this._state.index+this._state.render;e++)this.updateItem(e,s,!t),s=s.nextSibling||this.wrapper.firstChild}}class TreeNode{constructor(t={}){this.data=t,this.parent=null,this.children=[]}getParent(){return this.isRoot()?null:this.parent}hasParent(){return!this.isRoot()}isRoot(){return null===this.parent||this.parent.data===TreeNode.getRootSymbol()}hasChildren(){return this.children.length>0}isEmpty(){return 0===this.children.length}getAncestors(){for(var t=[],e=this.getParent();e&&e.data!==TreeNode.getRootSymbol();)t.push(e),e=e.getParent();return t}getIndex(){return null===this.parent?0:this.parent.children.indexOf(this)}isLast(){if(null===this.parent)return!0;var t=this.parent.children;return t[t.length-1]===this}getChildren(){return this.children}getDescendants(){var t=[];let e=function(s){for(let i of s.children)t.push(i),e(i)};return e(this),t}addChild(t,e){return Array.isArray(t)?(t.forEach(((t,s)=>this.addChild(t,void 0===e?e:e+s))),this):(t.parent&&t.parent.children.splice(t.parent.children.indexOf(t),1),t.parent=this,void 0===e?this.children.push(t):this.children.splice(e,0,t),this)}delete(){return this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent=null,this}empty(){this.children=[]}move(t,e){t.addChild(this,e)}copy(t,e){t.addChild(TreeNode.fromJSON(this.toJSON("children","data"),"children","data"),e)}get(t,e=null){let s=this.data[t]||e;return s instanceof Function?s(t,e):s}set(t,e){return this.data[t]=e,this}data(t){return void 0!==t&&(this.data=t),this.data}toJSON(t="children",e=""){if(e)return{[e]:this.data,[t]:this.children.map((s=>s.toJSON(t,e)))};let s=this.data;return s[t]=this.children.map((s=>s.toJSON(t,e))),s}toFlatJSON(t="id",e="id",s="parent",i="position",r=""){let n=[],a=o=>{if(r)n.push({[e]:o.data[t],[s]:o.parent?o.parent.data[t]:null,[i]:o.getIndex(),[r]:o.data});else{let r=o.data;r[e]=o.data[t],r[s]=o.parent?o.parent.data[t]:null,r[i]=o.getIndex(),n.push(r)}o.children.forEach(a)};return a(this),n}static fromJSON(t,e="children",s=""){if(Array.isArray(t))return t.map((t=>TreeNode.fromJSON(t,e)));if(!s){let i={},r=[];for(let s of Object.keys(t))s!==e?i[s]=t[s]:r=t[s];let n=new TreeNode(i);return r&&r.forEach((t=>n.addChild(TreeNode.fromJSON(t,e,s)))),n}let i=new TreeNode(t[s]);return t[e]&&t[e].forEach((t=>i.addChild(TreeNode.fromJSON(t,e,s)))),i}static fromFlatJSON(t,e="id",s="parent",i="position",r=""){var n=new Map;return t.forEach((t=>{n[t[e]]={data:r?t[r]:t,children:[]}})),n.forEach(((t,e)=>{n.has(e[s])&&n.get(e[s]).children.push(e)})),i&&n.forEach(((t,e)=>{e.children.sort((function(t,e){return(t=t[i])===(e=e[i])?0:t<e?-1:1}))})),n.forEach(((t,e)=>{n.has(e[s])&&n.delete(t)})),TreeNode.fromJSON(Array.from(n.values()),"children","data")}static getRootSymbol(){return TreeNode.root||(TreeNode.root=Symbol("Root symbol")),TreeNode.root}static getRoot(){return new TreeNode(TreeNode.getRootSymbol())}}class Tree{constructor(){this.root=TreeNode.getRoot()}addRoot(t,e){return this.root.addChild(t,e)}getRoots(){return this.root.getChildren()}isEmpty(){return this.root.isEmpty()}empty(){return this.root.empty()}toJSON(t="children",e=""){return this.root.toJSON(t,e).children}toFlatJSON(t="id",e="id",s="parent",i="position",r=""){let n=this.root.toFlatJSON(t,e,s,i,r);return delete n[0],n}_normalizeCriteria(t){return"function"==typeof t?t:("object"!=typeof t&&(t={id:t}),function(e){for(let s of Object.keys(t))if(e.data[s]!==t[s])return!1;return!0})}find(t){t=this._normalizeCriteria(t);let e=[];for(let s of this)t(s)&&e.push(s);return e}findFirst(t){t=this._normalizeCriteria(t);for(let e of this)if(t(e))return e;return null}*filter(t){t=this._normalizeCriteria(t);for(let e of this)t(e)&&(yield e)}*[Symbol.iterator](){let t=function*(e){for(let s of e.children)yield s,yield*t(s)};yield*t(this.root)}}class jsTree{static _extend(t){t=t||{};for(let e=1;e<arguments.length;e++){let s=arguments[e];if(s)for(let e in s)s.hasOwnProperty(e)&&("object"==typeof s[e]&&null!==s[e]?t[e]=jsTree._extend(t[e],s[e]):t[e]=s[e])}return t}constructor(t={},e=null){if(this.options=jsTree._extend({},jsTree.defaults,t),this.tree=new Tree,this.events={},this.handlers={create:[],render:[]},this._nodeList=[],this._renderer=null,this.on("select deselect selectAll deselectAll\n             enable disable enableAll disableAll\n             rename",(()=>this.redraw())),this.on("open close openAll closeAll\n             hide show hideAll showAll\n             empty create delete move copy",(()=>this.redraw(!0))),e&&this.render(e),Object.entries(this.options.plugins).forEach((t=>jsTree.plugin[t[0]].call(this,t[1]||{}))),this.options.data instanceof Function){let t=this;this.options.data(null,(function(e){t.empty().create(e,null)}),(function(){}))}else this.empty().create(t.data,null)}addCreateHandler(t){this.handlers.create.push(t)}addRenderHandler(t){this.handlers.render.push(t)}node(t){if(t instanceof TreeNode)return t;if(t instanceof HTMLElement){for(;!t.classList.contains("jstree-node");){if(!t.parentNode||t.parentNode===window.document)return null;t=t.parentNode}return this._nodeList[parseInt(t.getAttribute("data-index"),10)]||null}return"object"!=typeof t&&"function"!=typeof t&&(t={[this.options.idProperty]:t}),this.tree.findFirst(t)}find(t){return"object"!=typeof t&&"function"!=typeof t&&(t={[this.options.idProperty]:t}),this.tree.find(t)}*filter(t){"object"!=typeof t&&"function"!=typeof t&&(t={[this.options.idProperty]:t}),yield*this.tree.filter(t)}*[Symbol.iterator](){yield*this.tree[Symbol.iterator]()}getState(t,e,s=null){return this.node(t).data.state&&void 0!==this.node(t).data.state[e]?this.node(t).data.state[e]:s}setState(t,e,s){return(t=this.node(t)).data.state||(t.data.state={}),t.data.state[e]!==s&&(t.data.state[e]=s,t._dirty=!0),this}trigger(t,e={}){return e.event=t,e.instance=this,this.events[t]&&this.events[t].forEach((t=>t(e))),this.events["*"]&&this.events["*"].forEach((t=>t(e))),this}on(t,e){let s=t.split(" ");return s.length>1?(s.forEach((t=>this.on(t,e))),this):(t=s[0],this.events[t]||(this.events[t]=[]),this.events[t].push(e),this)}off(t,e=null){let s=t.split(" ");if(s.length>1)return s.forEach((t=>this.off(t,e))),this;if(t=s[0],this.events[t]){null===e&&(this.events[t]=[]),-1!==this.events[t].indexOf(e)&&this.events[t].splice(this.events[t].indexOf(e),1)}return this}load(t,e,s){if(Array.isArray(t))return t.forEach((t=>this.load(t,e,s))),this;if(t=this.node(t),!this.getState(t,"loading")&&!this.getState(t,"loaded",!0)&&this.options.data instanceof Function){let i=this;i.setState(t,"loading",!0),this.options.data(t,(function(s){i.setState(t,"loading",!1),i.setState(t,"loaded",!0),i.create(s,t),e&&e.call(i)}),(function(){i.setState(t,"loading",!1),s&&s.call(i)}))}return this}open(t){return Array.isArray(t)?(t.forEach((t=>this.open(t))),this):(t=this.node(t),this.getState(t,"loaded",!0)?(t&&(this.setState(t,"opened",!0),this.trigger("open",{node:t})),this):(this.load(t,(()=>this.open(t))),this))}close(t){return Array.isArray(t)?(t.forEach((t=>this.close(t))),this):((t=this.node(t))&&(this.setState(t,"opened",!1),this.trigger("close",{node:t})),this)}openAll(){for(let t of this.tree)this.setState(t,"opened",!0);return this.trigger("openAll"),this}closeAll(){for(let t of this.tree)this.setState(t,"opened",!1);return this.trigger("closeAll"),this}hide(t){return Array.isArray(t)?(t.forEach((t=>this.hide(t))),this):((t=this.node(t))&&(this.setState(t,"hidden",!0),this.trigger("hide",{node:t})),this)}show(t){return Array.isArray(t)?(t.forEach((t=>this.show(t))),this):((t=this.node(t))&&(this.setState(t,"hidden",!1),this.trigger("show",{node:t})),this)}hideAll(){for(let t of this.tree)this.setState(t,"hidden",!0);return this.trigger("hideAll"),this}showAll(){for(let t of this.tree)this.setState(t,"hidden",!1);return this.trigger("showAll"),this}select(t){return Array.isArray(t)?(t.forEach((t=>this.select(t))),this):((t=this.node(t))&&(this.setState(t,"selected",!0),this.trigger("select",{node:t})),this)}deselect(t){return Array.isArray(t)?(t.forEach((t=>this.deselect(t))),this):((t=this.node(t))&&(this.setState(t,"selected",!1),this.trigger("deselect",{node:t})),this)}selectAll(){for(let t of this.tree)this.setState(t,"selected",!0);return this.trigger("selectAll"),this}deselectAll(){for(let t of this.tree)this.setState(t,"selected",!1);return this.trigger("deselectAll"),this}getSelected(){return this.tree.find((function(t){return t.data&&t.data.state&&t.data.state.selected}))}enable(t){return Array.isArray(t)?(t.forEach((t=>this.enable(t))),this):((t=this.node(t))&&(this.setState(t,"disabled",!1),this.trigger("enable",{node:t})),this)}disable(t){return Array.isArray(t)?(t.forEach((t=>this.disable(t))),this):((t=this.node(t))&&(this.setState(t,"disabled",!0),this.trigger("disable",{node:t})),this)}enableAll(){for(let t of this.tree)this.setState(t,"disabled",!1);return this.trigger("enableAll"),this}disableAll(){for(let t of this.tree)this.setState(t,"disabled",!0);return this.trigger("disableAll"),this}edit(t){throw new Error("Not defined",t)}empty(){return this.tree.empty(),this.trigger("empty"),this}parseNode(t,e=null){if(t instanceof TreeNode)return t;if(e||(e=this.options.format),"string"==typeof t){let s={};e.data?s[e.data][e.title]=t:s[e.title]=t,t=s}return e.flat?TreeNode.fromFlatJSON(t,e.id,e.parent,e.position,e.data):TreeNode.fromJSON(t,e.children,e.data)}create(t,e=null,s=null,i=null){if(t=this.parseNode(t,i),null===e)this.tree.addRoot(t,s);else{if(!(e=this.node(e)))throw new Error("Invalid parent");e.addChild(t,s)}return t._dirty=!0,this.trigger("create",{node:t,parent:e,index:s}),this}move(t,e,s=null){throw new Error("Not defined",t,e,s)}copy(t,e,s=null){throw new Error("Not defined",t,e,s)}delete(t){return Array.isArray(t)?(t.forEach((t=>this.enable(t))),this):((t=this.node(t)).remove(),this.trigger("delete",{node:t}),this)}*visible(){let t=function*(e){for(let s of e.children)s.data.state&&s.data.state.hidden||(yield s,s.data.state&&s.data.state.opened&&(yield*t(s)))};yield*t(this.tree.root)}redraw(t=!1){this.redrawID&&window.cancelAnimationFrame(this.redrawID),this.redrawID=window.requestAnimationFrame((()=>{this._nodeList||(t=!0),t&&(this._nodeList=Array.from(this.visible())),this._renderer&&this._renderer.updateAll(t)}))}render(t){let e=this;if(t.jsTree=e,t.classList.add("jstree"),t.addEventListener("click",(function(t){let s=t.target;s&&s.classList.contains("jstree-closed")&&e.open(s),s&&s.classList.contains("jstree-opened")&&e.close(s),s&&s.classList.contains("jstree-node-icon")&&(s=s.parentNode),s&&s.classList.contains("jstree-node-text")&&(t.preventDefault(),e.deselectAll(),e.select(s))})),this._nodeList=Array.from(this.visible()),"scroller"===this.options.renderer)this._renderer=new InfiniteScroller(t,{create:function(){let t=document.createElement("div");return t.classList.add("jstree-node"),this.handlers.create.forEach((e=>e.call(this,t))),t}.bind(this),update:function(t,e,s=!0){let i=this._nodeList[t];if(!i)return void(e.style.display="none");if(s&&!i._dirty)return;e.style.display="block";let r="";i.getAncestors().reverse().forEach((function(t){t.isLast()?r+='<i class="jstree-icon">&nbsp;</i>':r+='<i class="jstree-icon jstree-icon-v">&nbsp;</i>'}));let n="leaf";this.getState(i,"loaded",!0)?i.hasChildren()&&(n=this.getState(i,"opened")?"opened":"closed"):n="closed",i.isLast()?r+=`<i class="jstree-icon jstree-icon-v2 jstree-icon-h"><span class="jstree-${n}">&nbsp;</span></i>`:r+=`<i class="jstree-icon jstree-icon-v jstree-icon-h"><span class="jstree-${n}">&nbsp;</span></i>`,n=this.getState(i,"selected",!1)?"jstree-selected":"",r+=`<a class="jstree-node-text ${n}" href="#"><i class="jstree-icon jstree-node-icon">&nbsp;</i> ${i.get("text")}</a>`,e.setAttribute("data-index",t),e.innerHTML=r,this.handlers.render.forEach((t=>t.call(this,e,i))),i._dirty=!1}.bind(this),count:()=>this._nodeList.length});else this._renderer=new Flat(t,{create:function(){let t=document.createElement("div");return t.classList.add("jstree-node"),this.handlers.create.forEach((e=>e.call(this,t))),t}.bind(this),update:function(t,e,s=!0){let i=this._nodeList[t];if(!i)return void(e.style.display="none");if(s&&!i._dirty)return;e.style.display="block";let r="";i.getAncestors().reverse().forEach((function(t){t.isLast()?r+='<i class="jstree-icon">&nbsp;</i>':r+='<i class="jstree-icon jstree-icon-v">&nbsp;</i>'}));let n="leaf";this.getState(i,"loaded",!0)?i.hasChildren()&&(n=this.getState(i,"opened")?"opened":"closed"):n="closed",i.isLast()?r+=`<i class="jstree-icon jstree-icon-v2 jstree-icon-h"><span class="jstree-${n}">&nbsp;</span></i>`:r+=`<i class="jstree-icon jstree-icon-v jstree-icon-h"><span class="jstree-${n}">&nbsp;</span></i>`,n=this.getState(i,"selected",!1)?"jstree-selected":"",r+=`<a class="jstree-node-text ${n}" href="#"><i class="jstree-icon jstree-node-icon">&nbsp;</i> ${i.get("text")}</a>`,e.setAttribute("data-index",t),e.innerHTML=r,this.handlers.render.forEach((t=>t.call(this,e,i))),i._dirty=!1}.bind(this),count:()=>this._nodeList.length})}static instance(t){if(t instanceof HTMLElement){for(;void 0===t.jsTree;){if(!t.parentNode||t.parentNode===window.document)return null;t=t.parentNode}return t.jsTree}return null}}jsTree.defaults={data:(t,e)=>e([]),renderer:"flat",plugins:{},format:{flat:!1,id:"id",children:"children",parent:null,position:null,data:null,title:"text",html:!1},strings:{loading:"Loading ...",newNode:"New node"},selection:{multiple:!0,reveal:!0},check:()=>!0,error:t=>t};